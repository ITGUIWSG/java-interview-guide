- [1. 说说TCP的三次握手](#1-说说TCP的三次握手)
- [2. 谈谈TCP的四次挥手](#2-谈谈TCP的四次挥手)
- [3. 为什么会有TIME_WAIT状态](#3-为什么会有TIME_WAIT状态)
- [4. 服务器出现大量TIME_WAIT状态的原因有什么](#4-服务器出现大量TIME_WAIT状态的原因有什么)
- [5. UDP的特点](#5-UDP的特点)
- [6. TCP与UDP的区别](#6-TCP与UDP的区别)
## 1. 说说TCP的三次握手
- 在TCP/IP协议中，TCP协议提供可靠的连接服务，采用三次握手建立一个连接。
- 第一次握手：建立连接时，客户端发送SYN包（syn=j）到服务器，并进入SYN_SEND状态，等待服务器确认
- 第二次握手：服务器收到SYN包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态
- 第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK（ack=k+1）,此包发送完毕，客户端和服务端进入ESTABLISHED状态，完成三次握手
## 2. 谈谈TCP的四次挥手
- TCP采用四次挥手来释放连接
- 第一次挥手：Client发送一个FIN，用来关闭Client到Server的数据传送，Client进入FIN_WAIT_1状态
- 第二次挥手：Server收到FIN后，发送一个ACK给Client，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号），Server进入CLOSE_WAIT状态
- 第三次挥手：Server发送一个FIN，用来关闭Server到Client的数据传送，Server进入到LAST_ACK状态
- 第四次挥手：Client收到FIN后，Client进入TIME_WAIT状态，接着发送一个ACK给Server，确认序号为收到序号+1，Server进入CLOSED状态，完成四次挥手
## 3. 为什么会有TIME_WAIT状态
- 确保有足够的时间让对方收到ACK包
- 避免新旧连接混淆
## 4. 服务器出现大量CLOSE_WAIT状态的原因有什么
- 对方关闭socket连接，我方忙于读或写，没有及时关闭连接
- 解决方案
  - 检查代码，特别是释放资源的代码
  - 检查配置，特别是处理请求的线程配置
## 5. UDP的特点
- 面向非连接
- 不维护连接状态，支持同时向多个客户端传输相同的消息
- 数据包报头只有8个字节，额外开销较小
- 吞吐量只受限于数据生成速率、传输速率以及机器性能
- 尽最大努力交付，不保证可靠交付，不需要维持复杂的链接状态表
- 面向报文，不对应用程序提交的报文信息进行拆分或者合并
## 6. TCP与UDP的区别
